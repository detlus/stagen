#!/usr/bin/env node

var pjson = require('../package.json');
var version = pjson.version;
var help = `stagen ${version} -- stagen is a static site generator.

Usage:
  stagen <subcommand> [options]

Options:
  -s, --source [DIR] Source directory (defaults to ./)
  -d, --destination [DIR]  Destination directory (defaults to ./site)
  -h, --help         Show this message
  -v, --version      Print the name and version

Subcommands:
  build    Build the site
`;

var argv = require('minimist')(process.argv.slice(2), {boolean: true});

if (argv.h) {
  console.log(help);
  process.exit();
}
else if(argv.v) {
  console.log(`stagen ${version}`);
  process.exit();
}

if (argv._[0] === 'build') {
  var build = require('../lib/subcommands/build');
  build(argv);
}
else {
  console.log(help);
}
